////////////////////////////////////////////////////////////
//
// SHOOTER
//
// Autor:       Gerard Wypych
// Prowadzący:  mgr inż. Bartłomiej Gajewski
//
////////////////////////////////////////////////////////////

#ifndef OBSTACLE_HPP
#define OBSTACLE_HPP

////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include "Moveable.hpp"

/// BOOST - Serialization
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/export.hpp>
////////////////////////////////////////////////////////////

class Obstacle : public Moveable
{
    /// BOOST - Serialization
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<Moveable>(*this);
        ar & ID;
        ar & max_quantity;
        ar & quantity;
    }
    ////////////////////////////////////////////////////////////

public:
    ////////////////////////////////////////////////////////////
    /// \brief Constructor with counter
    ///
    ////////////////////////////////////////////////////////////
    Obstacle();

    ////////////////////////////////////////////////////////////
    /// \brief Destructor with counter
    ///
    ////////////////////////////////////////////////////////////
    ~Obstacle();

    ////////////////////////////////////////////////////////////
    /// \brief Creating, simple setting texture
    ///
    ////////////////////////////////////////////////////////////
    virtual void create( bool reset = true );

    ////////////////////////////////////////////////////////////
    /// \brief Return unique ID of Obstacle
    ///
    ////////////////////////////////////////////////////////////
    virtual unsigned int getID() const;
private:
    unsigned int ID;
    static unsigned int max_quantity;
    static unsigned int quantity;
};

//BOOST_CLASS_EXPORT_GUID(Obstacle, "Obstacle")

#endif // OBSTACLE_HPP
